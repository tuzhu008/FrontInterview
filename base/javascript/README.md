# JavaScript

### Cookie

HTTP 协议本身是无状态的。什么是无状态呢，即服务器无法判断用户身份。Cookie 实际上是一小段的 key-value 格式的文本信息。客户端向服务器发起请求，如果服务器需要记录该用户状态，就使用 `response` 向客户端浏览器颁发一个 Cookie。客户端浏览器会把 Cookie 保存起来。当浏览器再请求该网站时，浏览器把请求的网址连同该 Cookie 一同提交给服务器。服务器检查该 Cookie，以此来辨认用户状态。

优点：

* 数据持久性
* 不需要任何服务器资源，因为 Cookie 是存储在客户端并发送给服务器读取
* 可配置到期规则，控制 Cookie 的生命周期，使之不会永远有效，偷盗者可能拿到的是一个过期的 Cookie
* 简单性，基于文件的轻量结构
* 通过良好的编程，控制保存在 Cookie 中的 Session 对象的大小
* 通过加密和安全传输技术（ssl），减少 Cookie 被破解的可能性
* 只要cookie中不存放敏感的数据，即使被盗也不会有重大损失

缺点：

* Cookie 的数量和长度都有限制

  * IE6 及以下的版本最多20个

  * IE7 以后的可以有50个

  * Firefox 可以有50个
  * chrome 和 Safari 没有限制

  * 每个 cookie 的长度不超过4k，否则会被截掉

* 潜在的安全风险：

  * 明文存储，可修改，易被截取篡改，如果 cookie 被拦截，就可能会获取到所有的 Session 信息
  * 服务器如果未设置 `http-only` 时，客户端可以使用 JS 对其进行访问，进而可以修改。

* 受限于用户配置，有的用户禁用了浏览器或者客户端设备接受 cookie 的能力，因此限制了这一功能

* 使用场景有限：例如，有些状态不可能保存在客户端，为了防止重复提交表达，需要在服务器端保存一个计时器，如果把这个计时器保存在客户端，它将不起作用。

* 增加网络开销：由于每次都会随请求一起发送到服务器，一些不必要的信息也会一起发送，造成带宽的浪费。



### 本地存储



