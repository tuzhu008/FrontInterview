# Event Loop

事件循环

JavaScript 是单线程的语言。为了实现”非阻塞“，调度各种任务而引入了事件循环。

JavaScript 的 所有任务可以分成两种，一种是同步任务（synchronous），另一种是异步任务（asynchronous）。同步任务指的是，在主线程上排队执行的任务，只有前一个任务执行完毕，才能执行后一个任务；异步任务指的是，不进入主线程、而进入"任务队列"（task queue）的任务，只有"任务队列"通知主线程，某个异步任务可以执行了，该任务才会进入主线程执行。

## 堆

**堆**是堆内存的简称。

heap 是没有结构的，数据可以任意存放。heap 用于复杂数据类型（引用类型）分配空间，例如数组对象、object对象。

javascript 中其他类型的数据被称为引用类型的数据 : 如对象(Object)、数组(Array)、函数(Function) …，它们是通过拷贝和new出来的，这样的数据存储于堆中。其实，说存储于堆中，也不太准确，因为，引用类型的数据的地址指针是存储于栈中的，当我们想要访问引用类型的值的时候，需要先从栈中获得对象的地址指针，然后，在通过地址指针找到堆中的所需要的数据。

常见的异步任务有 Ajax 操作、定时器（setTimeout/setInterval）、UI事件（load(图片js文件的加载等)、resize、scroll、click等）。这些异步由响应的线程处理后，会将其回调添加到事件任务队列等待主线程执行。

JS 主线程会先执行执行栈中的代码，直到执行栈中的任务全部执行完。这时候 JS 主线程会去查找事件队列中的任务。

## 栈

**栈**是栈内存的简称。

stack是有结构的，每个区块按照一定次序存放（后进先出），stack中主要存放一些基本类型的变量和对象的引用，存在栈中的数据大小与生存期必须是确定的。可以明确知道每个区块的大小，因此，stack的寻址速度要快于heap。

javascript的基本类型就5种: Undefined、Null、Boolean、Number 和 String，它们都是直接按值存储在栈中的，每种类型的数据占用的内存空间的大小是确定的，并由系统自动分配和自动释放。这样带来的好处就是，内存可以及时得到回收，相对于堆来说，更加容易管理内存空间。

## 执行栈

使用栈的特性对函数执行进行管理。

## 事件任务队列

用于存放异步任务。