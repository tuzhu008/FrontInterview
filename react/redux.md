# Redux

Redux 是当今最热门的前端开发库之一。它是 JavaScript 程序的可预测状态容器，用于整个应用的状态管理。

使用 Redux 可编写行为一致、在不同环境\(客户端、服务器和本机\)中运行且易于测试的应用程序。除此之外，它还提供了良好的开发体验，比如结合实时代码编辑和时间旅行调试器。

您可以与React一起使用Redux，或者与任何其他视图库一起使用。它很小\(2kB，包括依赖项\)，但是有大量可用的插件。

* redux 是一个应用数据流框架，主要是解决了组件间状态共享的问题，原理是集中式管理，主要有三个核心方法，action，store，reducer，工作流程是 view 调用 store 的 dispatch 接收 action 传入 store，reducer 进行 state 操作，view 通过 store 提供的 getState 获取最新的数据，flux 也是用来进行数据操作的，有四个组成部分 action，dispatch，view，store，工作流程是 view 发出一个 action，派发器接收 action，让 store 进行数据更新，更新完成以后 store 发出 change，view 接受 change 更新视图。Redux 和 Flux 很像。主要区别在于 Flux 有多个可以改变应用状态的 store，在 Flux 中 dispatcher 被用来传递数据到注册的回调事件，但是在 redux 中只能定义一个可更新状态的 store，redux 把 store 和 Dispatcher 合并,结构更加简单清晰

* 新增 state,对状态的管理更加明确，通过 redux，流程更加规范了，减少手动编码量，提高了编码效率，同时缺点时当数据更新时有时候组件不需要，但是也要重新绘制，有些影响效率。一般情况下，我们在构建多交互，多数据流的复杂项目应用时才会使用它们

## redux 有什么缺点

* 一个组件所需要的数据，必须由父组件传过来，而不能像 flux 中直接从 store 取。

* 当一个组件相关数据更新时，即使父组件不需要用到这个组件，父组件还是会重新 render，可能会有效率影响，或者需要写复杂的 shouldComponentUpdate 进行判断。

## 列出 Redux 的组件

* Store – 整个程序的状态/对象树保存在Store中。

* Action – 这是一个用来描述发生了什么事情的对象。

* Reducer – 这是一个确定状态将如何变化的地方。

* View – 只显示 Store 提供的数据。

## Redux 遵循的三个原则是什么？

* 单一事实来源

  整个应用的状态存储在单个 store 中的对象/状态树里。单一状态树可以更容易地跟踪随时间的变化，并调试或检查应用程序。

* 状态是只读的

  改变状态的唯一方法是去触发一个动作。动作是描述变化的普通 JS 对象。就像 state 是数据的最小表示一样，该操作是对数据更改的最小表示。

* 使用纯函数进行更改

  为了指定状态树如何通过操作进行转换，你需要纯函数。纯函数是那些返回值仅取决于其参数值的函数。

## 你对“单一真实来源”有什么理解？

Redux 使用 “Store” 将程序的整个状态存储在同一个地方。因此所有组件的状态都存储在 Store 中，并且它们从 Store 本身接收更新。单一状态树可以更容易地跟踪随时间的变化，并调试或检查程序。

## 数据如何通过 Redux 流动？

## 如何在 Redux 中定义 Action？

React 中的 Action 必须具有 type 属性，该属性指示正在执行的 ACTION 的类型。必须将它们定义为字符串常量，并且还可以向其添加更多的属性。在 Redux 中，action 被名为 Action Creators 的函数所创建。以下是 Action 和 Action Creator 的示例：

```js
function addTodo(text) {
  return {
    type: ADD_TODO,
    text
  }
}
```

## 解释 Reducer 的作用

Reducers 是纯函数，它规定应用程序的状态怎样因响应 ACTION 而改变。Reducers 通过接受先前的状态和 action 来工作，然后它返回一个新的状态。它根据操作的类型确定需要执行哪种更新，然后返回新的值。如果不需要完成任务，它会返回原来的状态。

## Store 在 Redux 中的意义是什么？

Store 是一个 JavaScript 对象，它可以保存程序的状态，并提供一些方法来访问状态、调度操作和注册侦听器。应用程序的整个状态/对象树保存在单一存储中。因此，Redux 非常简单且是可预测的。我们可以将中间件传递到 store 来处理数据，并记录改变存储状态的各种操作。所有操作都通过 reducer 返回一个新状态。

## Redux 与 Flux 有何不同？

| Flux | Redux |
| :--- | :--- |
| Store 包含状态和更改逻辑 | Store 和更改逻辑是分开的 |
| 有多个 Store | 只有一个 Store |
| 所有 Store 都互不影响且是平级的 | 带有分层 reducer 的单一 Store |
| 有单一调度器 | 没有调度器的概念 |
| React 组件订阅 store | 容器组件是有联系的 |
| 状态是可变的 | 状态是不可改变的 |

## Redux 有哪些优点？

* **结果的可预测性**

  由于总是存在一个真实来源，即 store ，因此不存在如何将当前状态与动作和应用的其他部分同步的问题。

* **可维护性**

  代码变得更容易维护，具有可预测的结果和严格的结构。

* **服务器端渲染**

  你只需将服务器上创建的 store 传到客户端即可。这对初始渲染非常有用，并且可以优化应用性能，从而提供更好的用户体验。

* **开发人员工具**

  从操作到状态更改，开发人员可以实时跟踪应用中发生的所有事情。

* **社区和生态系统**

  Redux 背后有一个巨大的社区，这使得它更加迷人。一个由才华横溢的人组成的大型社区为库的改进做出了贡献，并开发了各种应用。

* **易于测试**

  Redux 的代码主要是小巧、纯粹和独立的功能。这使代码可测试且独立。

* **组织**

  Redux 准确地说明了代码的组织方式，这使得代码在团队使用时更加一致和简单。



